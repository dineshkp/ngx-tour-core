{"version":3,"file":"ngx-tour-core.umd.js","sources":["../../../projects/ngx-tour-core/src/lib/tour.service.ts","../../../projects/ngx-tour-core/src/lib/tour-hotkey-listener.component.ts","../../../projects/ngx-tour-core/src/lib/tour.module.ts","../../../projects/ngx-tour-core/src/public_api.ts","../../../projects/ngx-tour-core/src/ngx-tour-core.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {NavigationStart, Router} from '@angular/router';\nimport type {UrlSegment} from '@angular/router';\n\nimport { TourAnchorDirective } from './tour-anchor.directive';\nimport { Subject, Observable, merge as mergeStatic } from 'rxjs';\nimport { first, map, filter } from 'rxjs/operators';\n\nexport interface IStepOption {\n  stepId?: string;\n  anchorId?: string;\n  title?: string;\n  content?: string;\n  route?: string | UrlSegment[];\n  nextStep?: number | string;\n  prevStep?: number | string;\n  placement?: any;\n  preventScrolling?: boolean;\n  prevBtnTitle?: string;\n  nextBtnTitle?: string;\n  endBtnTitle?: string;\n}\n\nexport enum TourState {\n  OFF,\n  ON,\n  PAUSED\n}\n\n@Injectable()\nexport class TourService<T extends IStepOption = IStepOption> {\n  public stepShow$: Subject<T> = new Subject();\n  public stepHide$: Subject<T> = new Subject();\n  public initialize$: Subject<T[]> = new Subject();\n  public start$: Subject<T> = new Subject();\n  public end$: Subject<any> = new Subject();\n  public pause$: Subject<T> = new Subject();\n  public resume$: Subject<T> = new Subject();\n  public anchorRegister$: Subject<string> = new Subject();\n  public anchorUnregister$: Subject<string> = new Subject();\n  public events$: Observable<{ name: string; value: any }> = mergeStatic(\n    this.stepShow$.pipe(map(value => ({ name: 'stepShow', value }))),\n    this.stepHide$.pipe(map(value => ({ name: 'stepHide', value }))),\n    this.initialize$.pipe(map(value => ({ name: 'initialize', value }))),\n    this.start$.pipe(map(value => ({ name: 'start', value }))),\n    this.end$.pipe(map(value => ({ name: 'end', value }))),\n    this.pause$.pipe(map(value => ({ name: 'pause', value }))),\n    this.resume$.pipe(map(value => ({ name: 'resume', value }))),\n    this.anchorRegister$.pipe(\n      map(value => ({\n        name: 'anchorRegister',\n        value\n      }))\n    ),\n    this.anchorUnregister$.pipe(\n      map(value => ({\n        name: 'anchorUnregister',\n        value\n      }))\n    )\n  );\n\n  public steps: T[] = [];\n  public currentStep: T;\n\n  public anchors: { [anchorId: string]: TourAnchorDirective } = {};\n  private status: TourState = TourState.OFF;\n  private isHotKeysEnabled = true;\n\n  constructor(private router: Router) {}\n\n  public initialize(steps: T[], stepDefaults?: T): void {\n    if (steps && steps.length > 0) {\n      this.status = TourState.OFF;\n      this.steps = steps.map(step => Object.assign({}, stepDefaults, step));\n      this.initialize$.next(this.steps);\n    }\n  }\n\n  public disableHotkeys(): void {\n    this.isHotKeysEnabled = false;\n  }\n\n  public enableHotkeys(): void {\n    this.isHotKeysEnabled = true;\n  }\n\n  public start(): void {\n    this.startAt(0);\n  }\n\n  public startAt(stepId: number | string): void {\n    this.status = TourState.ON;\n    this.goToStep(this.loadStep(stepId));\n    this.start$.next();\n    this.router.events\n      .pipe(filter(event => event instanceof NavigationStart), first())\n      .subscribe(() => {\n        if (this.currentStep && this.currentStep.hasOwnProperty('route')) {\n          this.hideStep(this.currentStep);\n        }\n      });\n  }\n\n  public end(): void {\n    this.status = TourState.OFF;\n    this.hideStep(this.currentStep);\n    this.currentStep = undefined;\n    this.end$.next();\n  }\n\n  public pause(): void {\n    this.status = TourState.PAUSED;\n    this.hideStep(this.currentStep);\n    this.pause$.next();\n  }\n\n  public resume(): void {\n    this.status = TourState.ON;\n    this.showStep(this.currentStep);\n    this.resume$.next();\n  }\n\n  public toggle(pause?: boolean): void {\n    if (pause) {\n      if (this.currentStep) {\n        this.pause();\n      } else {\n        this.resume();\n      }\n    } else {\n      if (this.currentStep) {\n        this.end();\n      } else {\n        this.start();\n      }\n    }\n  }\n\n  public next(): void {\n    if (this.hasNext(this.currentStep)) {\n      this.goToStep(\n        this.loadStep(\n          this.currentStep.nextStep || this.steps.indexOf(this.currentStep) + 1\n        )\n      );\n    }\n  }\n\n  public hasNext(step: T): boolean {\n    if (!step) {\n      console.warn('Can\\'t get next step. No currentStep.');\n      return false;\n    }\n    return (\n      step.nextStep !== undefined ||\n      this.steps.indexOf(step) < this.steps.length - 1\n    );\n  }\n\n  public prev(): void {\n    if (this.hasPrev(this.currentStep)) {\n      this.goToStep(\n        this.loadStep(\n          this.currentStep.prevStep || this.steps.indexOf(this.currentStep) - 1\n        )\n      );\n    }\n  }\n\n  public hasPrev(step: T): boolean {\n    if (!step) {\n      console.warn('Can\\'t get previous step. No currentStep.');\n      return false;\n    }\n    return step.prevStep !== undefined || this.steps.indexOf(step) > 0;\n  }\n\n  public goto(stepId: number | string): void {\n    this.goToStep(this.loadStep(stepId));\n  }\n\n  public register(anchorId: string, anchor: TourAnchorDirective): void {\n    if (!anchorId)\n      return;\n    if (this.anchors[anchorId]) {\n      throw new Error('anchorId ' + anchorId + ' already registered!');\n    }\n    this.anchors[anchorId] = anchor;\n    this.anchorRegister$.next(anchorId);\n  }\n\n  public unregister(anchorId: string): void {\n    if (!anchorId)\n      return;\n    delete this.anchors[anchorId];\n    this.anchorUnregister$.next(anchorId);\n  }\n\n  public getStatus(): TourState {\n    return this.status;\n  }\n\n  public isHotkeysEnabled(): boolean {\n    return this.isHotKeysEnabled;\n  }\n\n  private goToStep(step: T): void {\n    if (!step) {\n      console.warn('Can\\'t go to non-existent step');\n      this.end();\n      return;\n    }\n    let navigatePromise: Promise<boolean> = new Promise(resolve =>\n      resolve(true)\n    );\n    if (step.route !== undefined && typeof step.route === 'string') {\n      navigatePromise = this.router.navigateByUrl(step.route);\n    } else if (step.route && Array.isArray(step.route)) {\n      navigatePromise = this.router.navigate(step.route);\n    }\n    navigatePromise.then(navigated => {\n      if (navigated !== false) {\n        setTimeout(() => this.setCurrentStep(step));\n      }\n    });\n  }\n\n  private loadStep(stepId: number | string): T {\n    if (typeof stepId === 'number') {\n      return this.steps[stepId];\n    } else {\n      return this.steps.find(step => step.stepId === stepId);\n    }\n  }\n\n  private setCurrentStep(step: T): void {\n    if (this.currentStep) {\n      this.hideStep(this.currentStep);\n    }\n    this.currentStep = step;\n    this.showStep(this.currentStep);\n    this.router.events\n      .pipe(filter(event => event instanceof NavigationStart), first())\n      .subscribe(() => {\n        if (this.currentStep && this.currentStep.hasOwnProperty('route')) {\n          this.hideStep(this.currentStep);\n        }\n      });\n  }\n\n  private showStep(step: T): void {\n    const anchor = this.anchors[step && step.anchorId];\n    if (!anchor) {\n      console.warn(\n        'Can\\'t attach to unregistered anchor with id ' + step.anchorId\n      );\n      this.end();\n      return;\n    }\n    anchor.showTourStep(step);\n    this.stepShow$.next(step);\n  }\n\n  private hideStep(step: T): void {\n    const anchor = this.anchors[step && step.anchorId];\n    if (!anchor) {\n      return;\n    }\n    anchor.hideTourStep();\n    this.stepHide$.next(step);\n  }\n}\n","import { Component, HostListener } from '@angular/core';\n\nimport { TourService, TourState } from './tour.service';\n\n@Component({\n  selector: 'tour-hotkey-listener',\n  template: `<ng-content></ng-content>`\n})\nexport class TourHotkeyListenerComponent {\n  constructor(public tourService: TourService) {}\n\n  /**\n   * Configures hot keys for controlling the tour with the keyboard\n   */\n  @HostListener('window:keydown.Escape')\n  public onEscapeKey(): void {\n    if (\n      this.tourService.getStatus() === TourState.ON &&\n      this.tourService.isHotkeysEnabled()\n    ) {\n      this.tourService.end();\n    }\n  }\n\n  @HostListener('window:keydown.ArrowRight')\n  public onArrowRightKey(): void {\n    if (\n      this.tourService.getStatus() === TourState.ON &&\n      this.tourService.hasNext(this.tourService.currentStep) &&\n      this.tourService.isHotkeysEnabled()\n    ) {\n      this.tourService.next();\n    }\n  }\n\n  @HostListener('window:keydown.ArrowLeft')\n  public onArrowLeftKey(): void {\n    if (\n      this.tourService.getStatus() === TourState.ON &&\n      this.tourService.hasPrev(this.tourService.currentStep) &&\n      this.tourService.isHotkeysEnabled()\n    ) {\n      this.tourService.prev();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { TourHotkeyListenerComponent } from './tour-hotkey-listener.component';\nimport { TourService } from './tour.service';\n\n@NgModule({\n    declarations: [TourHotkeyListenerComponent],\n    exports: [TourHotkeyListenerComponent],\n    imports: [CommonModule, RouterModule],\n})\nexport class TourModule {\n    public static forRoot(): ModuleWithProviders<TourModule> {\n        return {\n            ngModule: TourModule,\n            providers: [\n                TourService,\n            ],\n        };\n    }\n}\n\nexport { TourService };\n","/*\n * Public API Surface of ngx-tour-core\n */\n\nexport { TourModule, TourService } from './lib/tour.module';\nexport { IStepOption, TourState } from './lib/tour.service';\nexport { TourAnchorDirective } from './lib/tour-anchor.directive';\nexport { TourHotkeyListenerComponent } from './lib/tour-hotkey-listener.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["TourState","Subject","mergeStatic","map","filter","NavigationStart","first","Injectable","Router","Component","HostListener","NgModule","CommonModule","RouterModule"],"mappings":";;;;;;IAuBA,WAAY,SAAS;QACnB,uCAAG,CAAA;QACH,qCAAE,CAAA;QACF,6CAAM,CAAA;IACR,CAAC,EAJWA,iBAAS,KAATA,iBAAS,QAIpB;;QA0CC,qBAAoB,MAAc;YAAd,WAAM,GAAN,MAAM,CAAQ;YAtC3B,cAAS,GAAe,IAAIC,YAAO,EAAE,CAAC;YACtC,cAAS,GAAe,IAAIA,YAAO,EAAE,CAAC;YACtC,gBAAW,GAAiB,IAAIA,YAAO,EAAE,CAAC;YAC1C,WAAM,GAAe,IAAIA,YAAO,EAAE,CAAC;YACnC,SAAI,GAAiB,IAAIA,YAAO,EAAE,CAAC;YACnC,WAAM,GAAe,IAAIA,YAAO,EAAE,CAAC;YACnC,YAAO,GAAe,IAAIA,YAAO,EAAE,CAAC;YACpC,oBAAe,GAAoB,IAAIA,YAAO,EAAE,CAAC;YACjD,sBAAiB,GAAoB,IAAIA,YAAO,EAAE,CAAC;YACnD,YAAO,GAA6CC,UAAW,CACpE,IAAI,CAAC,SAAS,CAAC,IAAI,CAACC,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EAChE,IAAI,CAAC,SAAS,CAAC,IAAI,CAACA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EAChE,IAAI,CAAC,WAAW,CAAC,IAAI,CAACA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EACpE,IAAI,CAAC,MAAM,CAAC,IAAI,CAACA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EAC1D,IAAI,CAAC,IAAI,CAAC,IAAI,CAACA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EACtD,IAAI,CAAC,MAAM,CAAC,IAAI,CAACA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EAC1D,IAAI,CAAC,OAAO,CAAC,IAAI,CAACA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,OAAA,EAAE,IAAC,CAAC,CAAC,EAC5D,IAAI,CAAC,eAAe,CAAC,IAAI,CACvBA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC;gBACZ,IAAI,EAAE,gBAAgB;gBACtB,KAAK,OAAA;aACN,IAAC,CAAC,CACJ,EACD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CACzBA,aAAG,CAAC,UAAA,KAAK,IAAI,QAAC;gBACZ,IAAI,EAAE,kBAAkB;gBACxB,KAAK,OAAA;aACN,IAAC,CAAC,CACJ,CACF,CAAC;YAEK,UAAK,GAAQ,EAAE,CAAC;YAGhB,YAAO,GAAgD,EAAE,CAAC;YACzD,WAAM,GAAcH,iBAAS,CAAC,GAAG,CAAC;YAClC,qBAAgB,GAAG,IAAI,CAAC;SAEM;QAE/B,gCAAU,GAAV,UAAW,KAAU,EAAE,YAAgB;YAC5C,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC7B,IAAI,CAAC,MAAM,GAAGA,iBAAS,CAAC,GAAG,CAAC;gBAC5B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,GAAA,CAAC,CAAC;gBACtE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACnC;SACF;QAEM,oCAAc,GAAd;YACL,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;QAEM,mCAAa,GAAb;YACL,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAC9B;QAEM,2BAAK,GAAL;YACL,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACjB;QAEM,6BAAO,GAAP,UAAQ,MAAuB;YAA/B,iBAWN;YAVC,IAAI,CAAC,MAAM,GAAGA,iBAAS,CAAC,EAAE,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,MAAM;iBACf,IAAI,CAACI,gBAAM,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,YAAYC,sBAAe,GAAA,CAAC,EAAEC,eAAK,EAAE,CAAC;iBAChE,SAAS,CAAC;gBACT,IAAI,KAAI,CAAC,WAAW,IAAI,KAAI,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;oBAChE,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;iBACjC;aACF,CAAC,CAAC;SACN;QAEM,yBAAG,GAAH;YACL,IAAI,CAAC,MAAM,GAAGN,iBAAS,CAAC,GAAG,CAAC;YAC5B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;YAC7B,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;SAClB;QAEM,2BAAK,GAAL;YACL,IAAI,CAAC,MAAM,GAAGA,iBAAS,CAAC,MAAM,CAAC;YAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;SACpB;QAEM,4BAAM,GAAN;YACL,IAAI,CAAC,MAAM,GAAGA,iBAAS,CAAC,EAAE,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;QAEM,4BAAM,GAAN,UAAO,KAAe;YAC3B,IAAI,KAAK,EAAE;gBACT,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpB,IAAI,CAAC,KAAK,EAAE,CAAC;iBACd;qBAAM;oBACL,IAAI,CAAC,MAAM,EAAE,CAAC;iBACf;aACF;iBAAM;gBACL,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpB,IAAI,CAAC,GAAG,EAAE,CAAC;iBACZ;qBAAM;oBACL,IAAI,CAAC,KAAK,EAAE,CAAC;iBACd;aACF;SACF;QAEM,0BAAI,GAAJ;YACL,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;gBAClC,IAAI,CAAC,QAAQ,CACX,IAAI,CAAC,QAAQ,CACX,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CACtE,CACF,CAAC;aACH;SACF;QAEM,6BAAO,GAAP,UAAQ,IAAO;YACpB,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;gBACtD,OAAO,KAAK,CAAC;aACd;YACD,QACE,IAAI,CAAC,QAAQ,KAAK,SAAS;gBAC3B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAChD;SACH;QAEM,0BAAI,GAAJ;YACL,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;gBAClC,IAAI,CAAC,QAAQ,CACX,IAAI,CAAC,QAAQ,CACX,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CACtE,CACF,CAAC;aACH;SACF;QAEM,6BAAO,GAAP,UAAQ,IAAO;YACpB,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,CAAC,IAAI,CAAC,2CAA2C,CAAC,CAAC;gBAC1D,OAAO,KAAK,CAAC;aACd;YACD,OAAO,IAAI,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACpE;QAEM,0BAAI,GAAJ,UAAK,MAAuB;YACjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;SACtC;QAEM,8BAAQ,GAAR,UAAS,QAAgB,EAAE,MAA2B;YAC3D,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;gBAC1B,MAAM,IAAI,KAAK,CAAC,WAAW,GAAG,QAAQ,GAAG,sBAAsB,CAAC,CAAC;aAClE;YACD,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,MAAM,CAAC;YAChC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACrC;QAEM,gCAAU,GAAV,UAAW,QAAgB;YAChC,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACvC;QAEM,+BAAS,GAAT;YACL,OAAO,IAAI,CAAC,MAAM,CAAC;SACpB;QAEM,sCAAgB,GAAhB;YACL,OAAO,IAAI,CAAC,gBAAgB,CAAC;SAC9B;QAEO,8BAAQ,GAAR,UAAS,IAAO;YAAhB,iBAmBP;YAlBC,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;gBAC/C,IAAI,CAAC,GAAG,EAAE,CAAC;gBACX,OAAO;aACR;YACD,IAAI,eAAe,GAAqB,IAAI,OAAO,CAAC,UAAA,OAAO,IACzD,OAAA,OAAO,CAAC,IAAI,CAAC,GAAA,CACd,CAAC;YACF,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;gBAC9D,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACzD;iBAAM,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBAClD,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACpD;YACD,eAAe,CAAC,IAAI,CAAC,UAAA,SAAS;gBAC5B,IAAI,SAAS,KAAK,KAAK,EAAE;oBACvB,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAA,CAAC,CAAC;iBAC7C;aACF,CAAC,CAAC;SACJ;QAEO,8BAAQ,GAAR,UAAS,MAAuB;YACtC,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;gBAC9B,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;aAC3B;iBAAM;gBACL,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,MAAM,KAAK,MAAM,GAAA,CAAC,CAAC;aACxD;SACF;QAEO,oCAAc,GAAd,UAAe,IAAO;YAAtB,iBAaP;YAZC,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACjC;YACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,CAAC,MAAM;iBACf,IAAI,CAACI,gBAAM,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,YAAYC,sBAAe,GAAA,CAAC,EAAEC,eAAK,EAAE,CAAC;iBAChE,SAAS,CAAC;gBACT,IAAI,KAAI,CAAC,WAAW,IAAI,KAAI,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;oBAChE,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;iBACjC;aACF,CAAC,CAAC;SACN;QAEO,8BAAQ,GAAR,UAAS,IAAO;YACtB,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,CAAC,IAAI,CACV,+CAA+C,GAAG,IAAI,CAAC,QAAQ,CAChE,CAAC;gBACF,IAAI,CAAC,GAAG,EAAE,CAAC;gBACX,OAAO;aACR;YACD,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3B;QAEO,8BAAQ,GAAR,UAAS,IAAO;YACtB,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnD,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO;aACR;YACD,MAAM,CAAC,YAAY,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3B;;;;gBAlPFC,eAAU;;;gBA5BcC,aAAM;;;;QCQ7B,qCAAmB,WAAwB;YAAxB,gBAAW,GAAX,WAAW,CAAa;SAAI;;;;QAMxC,iDAAW,GAAX;YACL,IACE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,KAAKR,iBAAS,CAAC,EAAE;gBAC7C,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,EACnC;gBACA,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;aACxB;SACF;QAGM,qDAAe,GAAf;YACL,IACE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,KAAKA,iBAAS,CAAC,EAAE;gBAC7C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;gBACtD,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,EACnC;gBACA,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;aACzB;SACF;QAGM,oDAAc,GAAd;YACL,IACE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,KAAKA,iBAAS,CAAC,EAAE;gBAC7C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;gBACtD,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,EACnC;gBACA,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;aACzB;SACF;;;;gBAxCFS,cAAS,SAAC;oBACT,QAAQ,EAAE,sBAAsB;oBAChC,QAAQ,EAAE,2BAA2B;iBACtC;;;gBALQ,WAAW;;;8BAYjBC,iBAAY,SAAC,uBAAuB;kCAUpCA,iBAAY,SAAC,2BAA2B;iCAWxCA,iBAAY,SAAC,0BAA0B;;;;QCvB1C;;QACkB,kBAAO,GAAd;YACH,OAAO;gBACH,QAAQ,EAAE,UAAU;gBACpB,SAAS,EAAE;oBACP,WAAW;iBACd;aACJ,CAAC;SACL;;;;gBAbJC,aAAQ,SAAC;oBACN,YAAY,EAAE,CAAC,2BAA2B,CAAC;oBAC3C,OAAO,EAAE,CAAC,2BAA2B,CAAC;oBACtC,OAAO,EAAE,CAACC,mBAAY,EAAEC,mBAAY,CAAC;iBACxC;;;ICXD;;;;ICAA;;;;;;;;;;;;;;;;"}